(()=>{var e={};e.id=90,e.ids=[90],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6242:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),t(7252),t(2612),t(7824);var a=t(3282),l=t(5736),r=t(3906),i=t.n(r),n=t(6880),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["cms",{children:["programs",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7252)),"C:\\Users\\yvish\\projects\\OTT platform\\OTT_app-main\\packages\\cms\\app\\cms\\programs\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2612)),"C:\\Users\\yvish\\projects\\OTT platform\\OTT_app-main\\packages\\cms\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7824,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\yvish\\projects\\OTT platform\\OTT_app-main\\packages\\cms\\app\\cms\\programs\\[id]\\page.tsx"],m="/cms/programs/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/cms/programs/[id]/page",pathname:"/cms/programs/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5665:(e,s,t)=>{Promise.resolve().then(t.bind(t,8887))},7464:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8017:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},4959:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},3306:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]])},4431:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3835:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},9384:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},5248:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(1109).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8887:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(3227),l=t(3677),r=t(1043),i=t(649),n=t(6483),d=t(8808),c=t(5248),o=t(4959),m=t(4431);function u({program:e,onUpdate:s}){let[t,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[p,h]=(0,l.useState)({language:e.languagePrimary||"en",variant:"PORTRAIT",type:"poster",url:""});if(!e)return null;let g=e.assets||[],b=async t=>{if(t.preventDefault(),p.url){r(!0),n("");try{await d.h.post("/assets/programs",{programId:e.id,language:p.language,variant:p.variant,assetType:p.type,url:p.url}),h(e=>({...e,url:""})),s()}catch(e){console.error("Failed to add asset:",e),n(e.response?.data?.message||"Failed to add asset")}finally{r(!1)}}},y=async e=>{if(confirm("Delete this asset?")){r(!0);try{await d.h.delete(`/assets/programs/${e}`),s()}catch(e){console.error("Failed to delete asset:",e),n(e.response?.data?.message||"Failed to delete asset")}finally{r(!1)}}};return a.jsx("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-6",children:"Visual Assets (Posters & Thumbnails)"}),i&&a.jsx("div",{className:"mb-4 p-4 bg-red-900/30 border border-red-900/50 rounded-lg text-red-400 text-sm",children:i}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[g.map(e=>(0,a.jsxs)("div",{className:"group relative border border-slate-700 rounded-lg overflow-hidden bg-slate-900",children:[(0,a.jsxs)("div",{className:`relative ${"PORTRAIT"===e.variant?"aspect-[2/3]":"aspect-video"}`,children:[a.jsx("img",{src:e.url,alt:`${e.variant} ${e.language}`,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("button",{onClick:()=>y(e.id),className:"p-2 bg-red-600 rounded-full text-white hover:bg-red-700 transition-colors",title:"Delete Asset",children:a.jsx(c.Z,{className:"h-4 w-4"})})})]}),(0,a.jsxs)("div",{className:"p-3 bg-slate-800 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"font-medium text-gray-300",children:e.variant}),a.jsx("span",{className:"text-gray-500 uppercase",children:e.language})]}),a.jsx("div",{className:"flex justify-between items-center text-xs mt-1",children:a.jsx("span",{className:"text-yellow-500 capitalize",children:e.assetType})}),a.jsx("div",{className:"mt-1 text-xs text-gray-600 truncate",title:e.url,children:e.url})]})]},e.id)),0===g.length&&(0,a.jsxs)("div",{className:"col-span-full py-8 text-center text-gray-500 border-2 border-dashed border-slate-700 rounded-lg",children:[a.jsx(o.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No assets uploaded"})]})]}),(0,a.jsxs)("div",{className:"border-t border-slate-700 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-4",children:"Add New Asset"}),(0,a.jsxs)("form",{onSubmit:b,className:"flex flex-wrap gap-4 items-end bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[(0,a.jsxs)("div",{className:"w-32",children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),(0,a.jsxs)("select",{value:p.type,onChange:e=>h({...p,type:e.target.value}),className:"input-field w-full py-1.5 text-sm",children:[a.jsx("option",{value:"thumbnail",children:"Thumbnail"}),a.jsx("option",{value:"poster",children:"Poster"})]})]}),(0,a.jsxs)("div",{className:"w-32",children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Language"}),(0,a.jsxs)("select",{value:p.language,onChange:e=>h({...p,language:e.target.value}),className:"input-field w-full py-1.5 text-sm",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"te",children:"Telugu"}),a.jsx("option",{value:"hi",children:"Hindi"})]})]}),(0,a.jsxs)("div",{className:"w-32",children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Variant"}),(0,a.jsxs)("select",{value:p.variant,onChange:e=>h({...p,variant:e.target.value}),className:"input-field w-full py-1.5 text-sm",children:[a.jsx("option",{value:"PORTRAIT",children:"Portrait"}),a.jsx("option",{value:"LANDSCAPE",children:"Landscape"}),a.jsx("option",{value:"SQUARE",children:"Square"}),a.jsx("option",{value:"BANNER",children:"Banner"})]})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Image URL"}),a.jsx("input",{type:"url",value:p.url,onChange:e=>h({...p,url:e.target.value}),className:"input-field w-full py-1.5 text-sm",placeholder:"https://...",required:!0})]}),(0,a.jsxs)("button",{type:"submit",disabled:t||!p.url,className:"btn-primary py-1.5 px-4 flex items-center gap-x-2 disabled:opacity-50",children:[a.jsx(m.Z,{className:"h-4 w-4"}),"Add"]})]})]})]})})}var x=t(2049),p=t(4651),h=t(7464),g=t(9136),b=t(5169),y=t(7587),j=t(3835),v=t(3306),N=t(8017),f=t(9384),w=t(5619);function k(){let e=(0,r.useParams)(),{user:s}=(0,x.a)(),t=e.id,[c,o]=(0,l.useState)(null),[k,P]=(0,l.useState)([]),[T,S]=(0,l.useState)(!0),[C,A]=(0,l.useState)("details"),[E,U]=(0,l.useState)(!1),[D,M]=(0,l.useState)({}),[Z,I]=(0,l.useState)([]),[L,q]=(0,l.useState)({title:"",durationMs:"",contentType:"VIDEO",isPaid:!1,contentUrl:"",thumbnailUrl:"",subtitleUrl:"",shouldPublish:!0}),R=async()=>{try{let e=await d.h.get(`/programs/${t}`);o(e.data),M({title:e.data.title,description:e.data.description,languagePrimary:e.data.languagePrimary,languagesAvailable:e.data.languagesAvailable}),I(e.data.topics?.map(e=>e.topicId)||[])}catch(e){console.error("Failed to fetch program:",e)}finally{S(!1)}},O=async()=>{try{await d.h.patch(`/programs/${t}`,{...D,topics:{set:Z.map(e=>({topicId:e}))}}),U(!1),await R()}catch(e){alert(e.response?.data?.message||"Failed to update program")}},_=async()=>{if(c){if(!c.title){alert("Please provide a Series Title before publishing.");return}if(!c.description){alert("Please provide a Series Description before publishing.");return}if(!(c.assets&&c.assets.length>0)){alert("Please add at least one visual asset (thumbnail/poster) before publishing.");return}if(!c.terms?.some(e=>e.lessons&&e.lessons.length>0)){alert("Please add at least one episode before publishing.");return}if(confirm("Are you sure you want to publish this series? It will be visible to all users."))try{await d.h.patch(`/programs/${t}`,{status:"PUBLISHED",publishedAt:new Date().toISOString()}),R()}catch(e){alert(e.response?.data?.message||"Failed to publish series")}}},F=async e=>{if(e.preventDefault(),c)try{let e=c.terms?.find(e=>1===e.termNumber);e||(e=(await d.h.post("/terms",{programId:c.id,title:"Season 1",termNumber:1,description:"Season 1"})).data);let s=e.lessons||[],t=s.length>0?Math.max(...s.map(e=>e.lessonNumber))+1:1,a=L.durationMs?Math.round(6e4*parseFloat(L.durationMs)):0,l={termId:e.id,title:L.title,lessonNumber:t,durationMs:a,contentType:L.contentType,isPaid:L.isPaid,status:L.shouldPublish?"PUBLISHED":"DRAFT",publishedAt:L.shouldPublish?new Date().toISOString():null,contentLanguagePrimary:c.languagePrimary,contentLanguagesAvailable:[c.languagePrimary],contentUrlsByLanguage:{[c.languagePrimary]:L.contentUrl},assets:[]};L.thumbnailUrl&&(l.assets.push({assetType:"thumbnail",variant:"LANDSCAPE",url:L.thumbnailUrl,language:c.languagePrimary}),l.assets.push({assetType:"thumbnail",variant:"PORTRAIT",url:L.thumbnailUrl,language:c.languagePrimary})),L.subtitleUrl&&l.assets.push({assetType:"subtitle",variant:"DEFAULT",url:L.subtitleUrl,language:c.languagePrimary}),await d.h.post("/lessons",l),await R();let r=document.getElementById("add-episode-modal");r&&r.close(),q({title:"",durationMs:"",contentType:"VIDEO",isPaid:!1,contentUrl:"",thumbnailUrl:"",subtitleUrl:"",shouldPublish:!0}),alert("Episode created successfully!")}catch(e){console.error("Failed to create episode:",e),alert(e.response?.data?.message||"Failed to create episode")}};if(T)return a.jsx(n.o,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto"}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Loading series..."})]})});if(!c)return a.jsx(n.o,{children:(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Series not found"}),a.jsx(i.default,{href:"/cms/programs",className:"text-yellow-500 hover:text-yellow-400 hover:underline",children:"Back to Series"})]})});let H=e=>{switch(e){case"PUBLISHED":return"bg-success-900/30 text-success-400 border border-success-900/50";case"SCHEDULED":return"bg-warning-900/30 text-warning-400 border border-warning-900/50";case"DRAFT":default:return"bg-slate-800 text-gray-400 border border-slate-700";case"ARCHIVED":return"bg-red-900/30 text-red-400 border border-red-900/50"}},B=s?.role==="ADMIN"||s?.role==="EDITOR";return a.jsx(n.o,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(i.default,{href:"/cms/programs",className:"p-2 hover:bg-slate-800 rounded transition-colors text-gray-400 hover:text-white",children:a.jsx(p.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Series Control Room: ",c.title]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${H(c.status)}`,children:"PUBLISHED"===c.status?"Live":"SCHEDULED"===c.status?"Scheduled Drop":c.status}),c.publishedAt&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-400",children:[a.jsx(h.Z,{className:"h-4 w-4 mr-1"}),"Published ",new Date(c.publishedAt).toLocaleDateString()]})]})]}),B&&(0,a.jsxs)("div",{className:"flex gap-2",children:["PUBLISHED"!==c.status&&(0,a.jsxs)("button",{onClick:_,className:"btn-primary flex items-center gap-x-2 bg-green-600 hover:bg-green-700 text-white border-none",children:[a.jsx(g.Z,{className:"h-4 w-4"}),"Publish Series"]}),E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:O,className:"btn-primary flex items-center gap-x-2",children:[a.jsx(b.Z,{className:"h-4 w-4"}),"Save"]}),(0,a.jsxs)("button",{onClick:()=>{U(!1),R()},className:"btn-secondary flex items-center gap-x-2",children:[a.jsx(y.Z,{className:"h-4 w-4"}),"Cancel"]})]}):(0,a.jsxs)("button",{onClick:()=>U(!0),className:"btn-primary flex items-center gap-x-2",children:[a.jsx(j.Z,{className:"h-4 w-4"}),"Edit"]})]})]}),a.jsx("div",{className:"border-b border-slate-700 mb-6",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("button",{onClick:()=>A("details"),className:`flex items-center gap-2 pb-3 border-b-2 transition-colors ${"details"===C?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[a.jsx(v.Z,{className:"h-4 w-4"}),"Details"]}),(0,a.jsxs)("button",{onClick:()=>A("media"),className:`flex items-center gap-2 pb-3 border-b-2 transition-colors ${"media"===C?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[a.jsx(N.Z,{className:"h-4 w-4"}),"Media"]})]})}),"media"===C&&a.jsx(u,{program:c,onUpdate:R}),"details"===C&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Series Details"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title"}),E?a.jsx("input",{type:"text",value:D.title,onChange:e=>M({...D,title:e.target.value}),className:"input-field"}):a.jsx("p",{className:"text-gray-100",children:c.title})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),E?a.jsx("textarea",{value:D.description||"",onChange:e=>M({...D,description:e.target.value}),className:"input-field",rows:4}):a.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:c.description||"No description"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Primary Language"}),E?(0,a.jsxs)("select",{value:D.languagePrimary,onChange:e=>M({...D,languagePrimary:e.target.value}),className:"input-field",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"fr",children:"French"})]}):a.jsx("p",{className:"text-gray-100",children:c.languagePrimary})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Available Languages"}),E?a.jsx("div",{className:"space-y-2 mt-2",children:["en","es","fr"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:D.languagesAvailable?.includes(e)||!1,onChange:s=>{let t=D.languagesAvailable||[];s.target.checked?M({...D,languagesAvailable:[...t,e]}):M({...D,languagesAvailable:t.filter(s=>s!==e)})},className:"mr-2 rounded border-gray-600 bg-slate-800 text-yellow-500 focus:ring-yellow-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:e})]},e))}):a.jsx("p",{className:"text-gray-100",children:c.languagesAvailable?.join(", ")||"None"})]})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Topics"}),B&&E&&a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("select",{value:"",onChange:e=>{e.target.value&&!Z.includes(e.target.value)&&I([...Z,e.target.value])},className:"input-field py-1 text-sm",children:[a.jsx("option",{value:"",children:"Add Topic"}),k.filter(e=>!Z.includes(e.id)).map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[c.topics?.map(e=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-slate-800 text-yellow-400 rounded-full text-sm border border-slate-700",children:[a.jsx(f.Z,{className:"h-3 w-3"}),e.topic?.name,B&&E&&a.jsx("button",{onClick:()=>I(Z.filter(s=>s!==e.topicId)),className:"hover:text-yellow-300 ml-1",children:a.jsx(y.Z,{className:"h-3 w-3"})})]},e.topicId)),(!c.topics||0===c.topics.length)&&a.jsx("p",{className:"text-gray-500 text-sm",children:"No topics assigned"})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Seasons & Episodes"}),B&&(0,a.jsxs)("button",{onClick:()=>{let e=document.getElementById("add-episode-modal");e&&e.showModal()},className:"p-1 px-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded transition-colors text-sm flex items-center gap-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),"Add Episode"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[c.terms?.map(e=>a.jsxs("div",{className:"border border-slate-800 rounded-lg p-4 bg-slate-900/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("h3",{className:"font-semibold text-gray-200",children:["Season ",e.termNumber,": ",e.title||"Untitled"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[e.lessons?.length||0," episodes"]})]}),a.jsxs("div",{className:"space-y-2",children:[e.lessons?.map(e=>a.jsxs(i.default,{href:`/cms/lessons/${e.id}`,className:"flex items-center justify-between p-2 hover:bg-slate-800 rounded transition-colors group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(w.Z,{className:"h-4 w-4 text-gray-500 group-hover:text-yellow-500 transition-colors"}),a.jsxs("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:["Episode ",e.lessonNumber,": ",e.title]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${H(e.status)}`,children:"PUBLISHED"===e.status?"Dropped":"SCHEDULED"===e.status?"Scheduled Drop":e.status})]},e.id)),(!e.lessons||0===e.lessons.length)&&a.jsx("p",{className:"text-xs text-gray-500 italic px-2",children:"No episodes in this season"})]})]},e.id)),(!c.terms||0===c.terms.length)&&(0,a.jsxs)("div",{className:"text-center py-6 border border-dashed border-slate-700/50 rounded-lg",children:[a.jsx("p",{className:"text-gray-400 mb-2",children:"No seasons yet"}),a.jsx("p",{className:"text-xs text-gray-500",children:'Click "Add Episode" to automatically start Season 1'})]})]})]})]}),a.jsx("div",{className:"space-y-6"})]}),(0,a.jsxs)("dialog",{id:"add-episode-modal",className:"modal",children:[(0,a.jsxs)("div",{className:"modal-box bg-slate-900 border border-slate-700 text-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"font-bold text-lg text-white",children:"Add Episode"}),a.jsx("form",{method:"dialog",children:a.jsx("button",{className:"text-gray-400 hover:text-white",children:a.jsx(y.Z,{className:"h-5 w-5"})})})]}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:["Episode Title ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:L.title,onChange:e=>q({...L,title:e.target.value}),className:"input-field w-full",placeholder:"Episode Title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:["Content URL (Video/HLS) - ",c?.languagePrimary," ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"url",value:L.contentUrl,onChange:e=>q({...L,contentUrl:e.target.value}),className:"input-field w-full",placeholder:"https://example.com/video.mp4",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Thumbnail URL"}),a.jsx("input",{type:"url",value:L.thumbnailUrl,onChange:e=>q({...L,thumbnailUrl:e.target.value}),className:"input-field w-full",placeholder:"https://example.com/thumb.jpg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Subtitle URL (VTT)"}),a.jsx("input",{type:"url",value:L.subtitleUrl,onChange:e=>q({...L,subtitleUrl:e.target.value}),className:"input-field w-full",placeholder:"https://example.com/sub.vtt"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration (mins)"}),a.jsx("input",{type:"number",min:"0",step:"0.1",value:L.durationMs,onChange:e=>q({...L,durationMs:e.target.value}),className:"input-field w-full",placeholder:"2"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Type"}),(0,a.jsxs)("select",{value:L.contentType,onChange:e=>q({...L,contentType:e.target.value}),className:"input-field w-full",children:[a.jsx("option",{value:"VIDEO",children:"Video"}),a.jsx("option",{value:"TEXT",children:"Text"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center bg-slate-800 p-3 rounded border border-slate-700",children:[(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:L.isPaid,onChange:e=>q({...L,isPaid:e.target.checked}),className:"mr-2 rounded border-gray-600 bg-slate-800 text-yellow-500 focus:ring-yellow-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Premium (Paid)"})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:L.shouldPublish,onChange:e=>q({...L,shouldPublish:e.target.checked}),className:"mr-2 rounded border-gray-600 bg-slate-800 text-green-500 focus:ring-green-500"}),a.jsx("span",{className:"text-sm text-green-400 font-medium",children:"Publish Immediately"})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-900/20 p-3 rounded border border-yellow-900/40 text-xs text-yellow-400",children:["This will automatically add to ",a.jsx("strong",{children:"Season 1"}),". You can add more details later."]}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[a.jsx("form",{method:"dialog",children:a.jsx("button",{className:"btn-secondary",children:"Cancel"})}),a.jsx("button",{type:"submit",className:"btn-primary",children:"Create Episode"})]})]})]}),a.jsx("form",{method:"dialog",className:"modal-backdrop",children:a.jsx("button",{children:"close"})})]})]})})}function P(){return a.jsx(k,{})}},7252:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(3189).createProxy)(String.raw`C:\Users\yvish\projects\OTT platform\OTT_app-main\packages\cms\app\cms\programs\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[604,575,225],()=>t(6242));module.exports=a})();