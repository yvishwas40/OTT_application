(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4025:function(e,t,r){Promise.resolve().then(r.bind(r,4404))},4313:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(7653),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...h}=r;return(0,a.createElement)("svg",{ref:l,...s,width:i,height:i,stroke:o,strokeWidth:u?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(n(e)),d].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},8333:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(4313).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},909:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(4313).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7686:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(4313).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1695:function(e,t,r){"use strict";var a=r(1219);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},2226:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});let a=r(3908).Z.create({baseURL:"http://localhost:3000/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)})},4629:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return o},a:function(){return i}});var a=r(7573),s=r(7653),n=r(2226);let l=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{let r=JSON.parse(t);o(r),n.h.defaults.headers.common.Authorization="Bearer ".concat(e)}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}c(!1)},[]);let u=async(e,t)=>{try{let{access_token:r,user:a}=(await n.h.post("/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),n.h.defaults.headers.common.Authorization="Bearer ".concat(r),o(a),!0}catch(e){return console.error("Login failed:",e),!1}};return(0,a.jsx)(l.Provider,{value:{user:r,login:u,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete n.h.defaults.headers.common.Authorization,o(null)},loading:i},children:t})}function i(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4404:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(7573),s=r(7653),n=r(1695),l=r(4629),o=r(4313);let i=(0,o.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var c=r(7686);let u=(0,o.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var d=r(8333);let m=(0,o.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function h(){let[e,t]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1),[f,p]=(0,s.useState)(""),[y,g]=(0,s.useState)(!1),{login:v}=(0,l.a)(),j=(0,n.useRouter)(),w=async t=>{t.preventDefault(),p(""),g(!0);try{await v(e,r)?j.push("/login"):p("Invalid email or password")}catch(e){p("Login failed. Please try again.")}finally{g(!1)}};return(0,a.jsx)("div",{className:"card p-8",children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,a.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"input-field pl-10",placeholder:"admin@chaishorts.com",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,a.jsx)("input",{id:"password",type:h?"text":"password",value:r,onChange:e=>o(e.target.value),className:"input-field pl-10 pr-10",placeholder:"••••••••",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?(0,a.jsx)(u,{className:"h-5 w-5"}):(0,a.jsx)(d.Z,{className:"h-5 w-5"})})]})]}),f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-400 bg-red-900/30 p-3 rounded-lg border border-red-900/50",children:[(0,a.jsx)(m,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:f})]}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full btn-primary disabled:opacity-50",children:y?"Signing in...":"Sign In"}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"text-sm text-gray-400 bg-slate-800 p-3 rounded-lg border border-slate-700",children:[(0,a.jsx)("p",{className:"font-medium mb-1 text-gray-300",children:"Demo Credentials:"}),(0,a.jsx)("p",{children:"Admin: admin@chaishorts.com / admin123"}),(0,a.jsx)("p",{children:"Editor: editor@chaishorts.com / editor123"})]})})]})})}var x=r(909);function f(){let{user:e,loading:t}=(0,l.a)(),r=(0,n.useRouter)(),[o,i]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{i(!0)},[]),(0,s.useEffect)(()=>{!t&&e&&o&&("ADMIN"===e.role||"EDITOR"===e.role?r.push("/cms"):r.push("/"))},[e,t,r,o]),!o||t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-yellow-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})}):e?null:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-yellow-500 mb-2",children:"Chai Shorts CMS"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Admin & Editor Login"})]}),(0,a.jsx)(h,{})]})})}}},function(e){e.O(0,[908,293,427,744],function(){return e(e.s=4025)}),_N_E=e.O()}]);