(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5099:function(e,t,o){Promise.resolve().then(o.t.bind(o,7130,23)),Promise.resolve().then(o.t.bind(o,5646,23)),Promise.resolve().then(o.bind(o,4629))},2226:function(e,t,o){"use strict";o.d(t,{h:function(){return r}});let r=o(3908).Z.create({baseURL:"http://localhost:3000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)})},4629:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return s},a:function(){return u}});var r=o(7573),n=o(7653),a=o(2226);let l=(0,n.createContext)(void 0);function s(e){let{children:t}=e,[o,s]=(0,n.useState)(null),[u,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{let o=JSON.parse(t);s(o),a.h.defaults.headers.common.Authorization="Bearer ".concat(e)}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}i(!1)},[]);let c=async(e,t)=>{try{let{access_token:o,user:r}=(await a.h.post("/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(r)),a.h.defaults.headers.common.Authorization="Bearer ".concat(o),s(r),!0}catch(e){return console.error("Login failed:",e),!1}};return(0,r.jsx)(l.Provider,{value:{user:o,login:c,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete a.h.defaults.headers.common.Authorization,s(null)},loading:u},children:t})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5646:function(){},7130:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[763,908,293,427,744],function(){return e(e.s=5099)}),_N_E=e.O()}]);